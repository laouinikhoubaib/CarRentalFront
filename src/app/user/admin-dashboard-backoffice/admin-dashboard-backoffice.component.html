<div class="layout-dashboard">
    <div class="p-grid">




        <div class="p-col-12 p-md-6 p-xl-3">
            <div class="card no-gutter widget-overview-box widget-overview-box-3">
                            <span class="overview-icon">
                                <i class="pi pi-users"></i>
                            </span>
                <span class="overview-title">Customers</span>
                <div class="p-grid overview-detail">
                    <div class="p-col-6">
                        <div class="overview-number">{{subscribedUsers.length}}</div>
                        <div class="overview-subtext">Subscribed</div>
                    </div>
                    <div class="p-col-6">
                        <div class="overview-number">{{allUsers.length}}</div>
                        <div class="overview-subtext">Registered</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="p-col-12 p-md-6 p-xl-3">
            <div class="card no-gutter widget-overview-box widget-overview-box-1">
                            <span class="overview-icon">
                                <i class="pi pi-shopping-cart"></i>
                            </span>
                <span class="overview-title">Events</span>
            </div>
        </div>
        <div class="p-col-12 p-md-6 p-xl-3">
            <div class="card no-gutter widget-overview-box widget-overview-box-2">
                            <span class="overview-icon">
                                <i class="pi pi-dollar"></i>
                            </span>
                <span class="overview-title">Forums</span>
            </div>
        </div>

        <div class="p-col-12 p-md-6 p-xl-3">
            <div class="card no-gutter widget-overview-box widget-overview-box-4">
                            <span class="overview-icon">
                                <i class="pi pi-comment"></i>
                            </span>
                <span class="overview-title">Complaints</span>
                <div class="p-grid overview-detail">
                    <div class="p-col-6">
                        <div class="overview-number">0</div>
                        <div class="overview-subtext">New</div>
                    </div>
                    <div class="p-col-6">
                        <div class="overview-number">0</div>
                        <div class="overview-subtext">Responded</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-col-12 p-lg-4">
            <div class="card widget-tasks">
                <h4>Tasks</h4>
                <p>Overview of your pending tasks.</p>
                <div>
                    <div class="task task-1">
                        <div class="task-name"><span>12 Orders</span> to fulfill</div>
                        <div class="task-progress">
                            <div></div>
                        </div>
                    </div>
                    <div class="task task-2">
                        <div class="task-name"><span>40+ Payments</span> to withdraw</div>
                        <div class="task-progress">
                            <div></div>
                        </div>
                    </div>
                    <div class="task task-3">
                        <div class="task-name"><span>4 Reports</span> to revise</div>
                        <div class="task-progress">
                            <div></div>
                        </div>
                    </div>
                    <div class="task task-4">
                        <div class="task-name"><span>6 Questions</span> to respond</div>
                        <div class="task-progress">
                            <div></div>
                        </div>
                    </div>
                    <div class="task task-5">
                        <div class="task-name"><span>2 Chargebacks</span> to review</div>
                        <div class="task-progress">
                            <div></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h4>Administration Squad</h4>
                <p>Most active admins that work within our team</p>

                <ul class="widget-image-list">
                    <li>
                        <span>Member</span>
                    </li>

                </ul>
            </div>
        </div>

        <div class="p-col-12 p-lg-8">
            <div class="card revenue">
                <h4>Users origins</h4>
                <p>Comparison of users nations by country</p>
                <div class="revenue-chart-container">
                    <p-chart type="pie" id="revenue-chart" [data]="revenueChart"></p-chart>
                </div>
            </div>

            <div class="card">
                <h5 class="centerText">Subscription rate along the year</h5>
                <p-chart type="line" [data]="lineData"></p-chart>
            </div>
        </div>



        <div class="p-grid table-demo">
            <div class="p-col-12">
                <div class="card">
                    <p-table #dt [value]="allUsers" [(selection)]="selectedCustomers1" dataKey="id"
                             styleClass="p-datatable-customers" [rowHover]="true" [rows]="10" [paginator]="true"
                             [filterDelay]="0" [globalFilterFields]="['name','country', 'email', 'birthDate', 'phoneNumber','locked']">
                        <ng-template pTemplate="caption">
                            <div class="p-d-flex p-flex-column p-flex-md-row p-jc-md-between table-header">
                                Customers
                                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                </span>
                            </div>
                        </ng-template>
                        <ng-template pTemplate="header">
                            <tr>
                                <th style="width: 3rem">
                                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                </th>
                                <th pSortableColumn="name" style="width: 18rem">
                                    <div class="p-d-flex p-jc-between p-ai-center">
                                        Name
                                        <p-sortIcon field="name"></p-sortIcon>
                                        <p-columnFilter type="text" field="name" display="menu" class="p-ml-auto"></p-columnFilter>
                                    </div>
                                </th>
                                <th pSortableColumn="country">
                                    <div class="p-d-flex p-jc-between p-ai-center">
                                        Country
                                        <p-sortIcon field="country"></p-sortIcon>
                                        <p-columnFilter type="text" field="country" display="menu" class="p-ml-auto"></p-columnFilter>
                                    </div>
                                </th>
                                <th pSortableColumn="email" style="width: 20rem">
                                    <div class="p-d-flex p-jc-between p-ai-center">
                                        Email
                                        <p-sortIcon field="email"></p-sortIcon>
                                        <p-columnFilter type="text" field="email" display="menu" class="p-ml-auto"></p-columnFilter>
                                    </div>
                                </th>
                                <th pSortableColumn="birthDate">
                                    <div class="p-d-flex p-jc-between p-ai-center">
                                        Date
                                        <p-sortIcon field="birthDate"></p-sortIcon>
                                        <p-columnFilter type="date" field="birthDate" display="menu" class="p-ml-auto"></p-columnFilter>
                                    </div>
                                </th>
                                <th pSortableColumn="phoneNumber">
                                    <div class="p-d-flex p-jc-between p-ai-center">
                                        Contact
                                        <p-sortIcon field="phoneNumber"></p-sortIcon>
                                        <p-columnFilter type="text" field="phoneNumber" display="menu" class="p-ml-auto"></p-columnFilter>
                                    </div>
                                </th>
                                <th pSortableColumn="locked">
                                    <div class="p-d-flex p-jc-between p-ai-center">
                                        Status
                                        <p-sortIcon field="locked"></p-sortIcon>
                                        <p-columnFilter type="text" field="locked" display="menu" class="p-ml-auto"></p-columnFilter>
                                    </div>
                                </th>
                                <th style="width: 8rem"></th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-customer>
                            <tr class="p-selectable-row">
                                <td>
                                    <p-tableCheckbox [value]="customer"></p-tableCheckbox>
                                </td>
                                <td>
                                    <img src="assets/img/{{customer.profilPic}}" width="32" height="32"
                                         style="vertical-align: middle" class="profil-pic-round"/>
                                    <span class="p-column-title">Name</span>
                                    {{customer.name}}
                                </td>
                                <td>
                                    <span class="p-column-title">Email</span>
                                    <span class="image-text" style="margin-left: .5em;vertical-align: middle">{{customer.email}}</span>
                                </td>
                                <td>
                                    <span class="p-column-title">Date</span>
                                    <div *ngIf="customer.role === 'USER' || customer.role === 'ADMIN' || customer.role === 'EXPERT' || customer.role === 'FORMER'">{{customer.birthDate | date: 'MM/dd/yyyy'}}</div>
                                    <div *ngIf="customer.role === 'COMPANY' || customer.role === 'ASSOCIATION'">{{customer.establishmentDate | date: 'MM/dd/yyyy'}}</div>
                                </td>
                                <td>
                                    <span class="p-column-title">Contact</span>
                                    {{customer.phoneNumber}}
                                </td>
                                <td>
                                    <span class="p-column-title">Status</span>
                                    <span *ngIf="customer.locked" [class]="'customer-badge status-unqualified'">Locked</span>
                                    <span *ngIf="!customer.locked" [class]="'customer-badge status-proposal'">Active</span>
                                </td>
                                <td style="text-align: center">
                                    <button *ngIf="!customer.locked" pButton type="button" class="p-button-secondary" icon="pi pi-lock" (click)="lockUser(customer.username)"></button>
                                    <button *ngIf="customer.locked" pButton type="button" class="p-button-secondary" icon="pi pi-lock-open" (click)="unlockUser(customer.username)"></button>

                                    <button *ngIf="customer.role != 'ADMIN'" pButton type="button" class="p-button-secondary make-adm" icon="pi pi-user-plus" (click)="makeAdmin(customer.username)"></button>
                                    <button *ngIf="customer.role === 'ADMIN'" pButton type="button" class="p-button-secondary make-adm" icon="pi pi-user-minus" (click)="unlockUser(customer.username)"></button>
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="emptymessage">
                            <tr>
                                <td colspan="8">No customers found.</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>

        </div>



    </div>
</div>
